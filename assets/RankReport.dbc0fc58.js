import{_ as I,a as D,b as T,S as C,t as O,m as V,p as L}from"./mapValues.ce1632a2.js";import{L as M,E as n,o as i,c as B,w as h,a as t,e as c,t as o,f as m,b as d,v as _,G as u,h as x,F as f,i as y}from"./app.7ceab987.js";import{_ as A}from"./PrimaryButton.32c0c60d.js";import{_ as F}from"./SecondaryButton.a1d823ac.js";import{_ as N}from"./TextInput.8548017d.js";import{_ as P}from"./Modal.b18486ce.js";import{_ as j}from"./_plugin-vue_export-helper.cdc0426e.js";import"./NavLink.ef52d8c6.js";const G={components:{GuestLayout:I,PrimaryButton:A,SecondaryButton:F,DangerButton:D,Pagination:T,TextInput:N,Modal:P,SearchAutocomplete:C,Link:M},props:{orders:{type:Object,default:()=>({})},filters:Object},setup(){},data(){return{form:{search:this.filters.search,dateFrom:this.filters.dateFrom,dateTo:this.filters.dateTo,distributorId:null},showInvoiceModal:!1,openedOrder:[],autocompleteList:[],distributorSearch:"",totalCommission:0}},watch:{form:{deep:!0,handler:O(function(){this.$inertia.get("/",L(this.form),{preserveState:!0})},150)}},computed:{totalCommission(){return this.orders.data.length>0?[...this.orders.data].map(s=>s.commission).reduce((s,l)=>s+l,0):0}},methods:{reset(){this.form=V(this.form,()=>null),this.distributorSearch=""},destroy(r){confirm("Are you sure you want to Delete")&&this.$inertia.delete(route("contacts.destroy",r))},searchAutocompleteList(r){r.target&&(r.target.value!==""?(console.log(r.target.value),axios.get(route("distributor.autocomplete")+"?distributor_search="+r.target.value).then(s=>{console.log("res ==> ",s),this.autocompleteList=s.data})):r.target.value)},searchDistributor(r){this.form.distributorId=r}},mounted(){}},R=t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Order list ",-1),U={class:"py-12"},q={class:"mx-auto max-w-9xl sm:px-6 lg:px-8"},E={key:0,class:"p-4 mb-4 text-sm text-green-700 bg-green-100 rounded-lg dark:bg-green-200 dark:text-green-800",role:"alert"},K={class:"font-medium"},Q={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},W={class:"p-6 bg-white border-b border-gray-200"},X={class:"w-full flex flex-row justify-between"},z={class:"mb-2 flex items-center w-1/2"},H=t("div",{class:"mr-2"},"Distributor",-1),J={class:"font-bold"},Y={class:"mb-2 flex flex-row justify-between"},Z={class:"flex space-x-2"},$={class:"flex flex-row space-x-1"},tt={class:"flex flex-row"},et=t("label",{class:"mr-2",for:"datefrom"},"Date From: ",-1),st={class:"flex flex-row"},ot=t("label",{for:"dateto"},"Date To: ",-1),at=y("Reset"),rt={class:"flex items-center"},it=t("label",{class:"mr-3",for:"search"},"Search: ",-1),ct={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},lt={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},nt=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"},"#"),t("th",{scope:"col",class:"px-6 py-3"}," Invoice "),t("th",{scope:"col",class:"px-6 py-3"}," Purchaser "),t("th",{scope:"col",class:"px-6 py-3"}," Distributor "),t("th",{scope:"col",class:"px-6 py-3"}," Referred Distributors "),t("th",{scope:"col",class:"px-6 py-3"}," Order Date "),t("th",{scope:"col",class:"px-6 py-3"}," Order Total "),t("th",{scope:"col",class:"px-6 py-3"}," Percentage "),t("th",{scope:"col",class:"px-6 py-3"}," Commission "),t("th",{scope:"col",class:"px-6 py-3"}," Actions ")])],-1),dt={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},pt={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},ht={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},mt={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},_t={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},ut={class:"px-6 py-4"},xt={class:"px-6 py-4"},ft={class:"px-6 py-4"},yt={class:"px-6 py-4"},gt={class:"px-6 py-4"},wt=["onClick"],bt={key:0},vt=t("td",{class:"px-6 py-4 border-t text-center",colspan:"11"},"No orders found.",-1),kt=[vt],St={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},It={class:"flex flex-row justify-between"},Dt={class:"p-3"},Tt=t("b",null,"Invoice:",-1),Ct={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},Ot=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"}," SKU "),t("th",{scope:"col",class:"px-6 py-3"}," Product Name "),t("th",{scope:"col",class:"px-6 py-3"}," Price "),t("th",{scope:"col",class:"px-6 py-3"}," Quantity "),t("th",{scope:"col",class:"px-6 py-3"}," Total ")])],-1),Vt={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},Lt={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},Mt={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},Bt={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},At={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},Ft={key:0},Nt=t("td",{class:"px-6 py-4 border-t text-center",colspan:"11"},"No orders found.",-1),Pt=[Nt];function jt(r,s,l,Gt,a,p){const g=n("SearchAutocomplete"),w=n("SecondaryButton"),b=n("TextInput"),v=n("Pagination"),k=n("Modal"),S=n("GuestLayout");return i(),B(S,{title:"Dashboard"},{default:h(()=>[R,t("div",U,[t("div",q,[r.$page.props.flash&&r.$page.props.flash.message?(i(),c("div",E,[t("span",K,o(r.$page.props.flash.message),1)])):m("",!0),t("div",Q,[t("div",W,[t("div",X,[t("div",z,[H,d(g,{onInput:p.searchAutocompleteList,onSearchDistributor:p.searchDistributor,items:a.autocompleteList,isAsync:!0},null,8,["onInput","onSearchDistributor","items"])]),t("div",J,o("TOTAL COMMISSION: $"+p.totalCommission),1)]),t("div",Y,[t("div",Z,[t("div",$,[t("div",tt,[et,_(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a.form.dateFrom=e),class:"h-8",type:"date",name:"dateFrom",id:"datefrom"},null,512),[[u,a.form.dateFrom]])]),t("div",st,[ot,_(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.form.dateTo=e),class:"h-8",type:"date",name:"dateTo",id:"dateto"},null,512),[[u,a.form.dateTo]])]),d(w,{onClick:p.reset,class:"h-8"},{default:h(()=>[at]),_:1},8,["onClick"])])]),t("div",rt,[it,d(b,{id:"search",modelValue:a.form.search,"onUpdate:modelValue":s[2]||(s[2]=e=>a.form.search=e),type:"text",class:"mt-1 block w-full",placeholder:"Search"},null,8,["modelValue"])])]),t("div",ct,[t("table",lt,[nt,t("tbody",null,[(i(!0),c(f,null,x(l.orders.data,e=>(i(),c("tr",{key:e.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[t("th",dt,o(e.id),1),t("th",pt,o(e.invoice_number),1),t("th",ht,o(e.purchaser.name),1),t("th",mt,o(e.distributor?e.distributor.name:"-//-"),1),t("th",_t,o(e.referred_distributors),1),t("td",ut,o(e.order_date),1),t("td",xt,o(e.order_total),1),t("td",ft,o(e.percentage?e.percentage+"%":""),1),t("td",yt,o(e.commission),1),t("td",gt,[t("button",{onClick:Rt=>(a.showInvoiceModal=!0,a.openedOrder=e),class:"px-4 py-2 text-white bg-blue-600 rounded-lg"},"View",8,wt)])]))),128)),l.orders.data.length===0?(i(),c("tr",bt,kt)):m("",!0)])])]),d(v,{data:l.orders},null,8,["data"])])])])]),d(k,{show:a.showInvoiceModal,maxWidth:"7xl",onClose:s[4]||(s[4]=e=>a.showInvoiceModal=!1)},{default:h(()=>[t("div",St,[t("div",It,[t("div",Dt,[Tt,y(o(a.openedOrder.invoice_number),1)]),t("div",{onClick:s[3]||(s[3]=e=>a.showInvoiceModal=!1),class:"p-2 font-bold text-xl cursor-pointer"},"X")]),t("table",Ct,[Ot,t("tbody",null,[(i(!0),c(f,null,x(a.openedOrder.products,e=>(i(),c("tr",{key:a.openedOrder.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[t("th",Vt,o(e.sku),1),t("th",Lt,o(e.name),1),t("th",Mt,o(e.price),1),t("th",Bt,o(e.qantity),1),t("th",At,o(e.qantity*e.price),1)]))),128)),l.orders.data.length===0?(i(),c("tr",Ft,Pt)):m("",!0)])])])]),_:1},8,["show"])]),_:1})}const Ht=j(G,[["render",jt]]);export{Ht as default};
